var AngularInputNumberComponent_1;
import { __decorate } from "tslib";
import { Component, Input, forwardRef } from '@angular/core';
import { NG_VALUE_ACCESSOR } from '@angular/forms';
let AngularInputNumberComponent = AngularInputNumberComponent_1 = class AngularInputNumberComponent {
    constructor() {
        this._value = 0;
        this.propagateChange = (_) => { };
    }
    onChange(event) {
        this.propagateChange(this._value);
    }
    onKeyDown(event) {
        const pattern = new RegExp('[0-9]|\\*');
        if (!pattern.test(event.key) && event.key !== "Backspace" && event.key !== "Delete") {
            event.preventDefault();
        }
    }
    onKyUp(event) {
        this._value = event.currentTarget.valueAsNumber;
        this.propagateChange(event.currentTarget.valueAsNumber);
    }
    registerOnChange(fn) {
        this.propagateChange = fn;
    }
    registerOnTouched(fn) {
    }
    writeValue(val) {
        this._value = val;
    }
    setDisabledState(val) {
        if (this.disabled == null) {
            this.disabled = false;
        }
    }
    ngOnInit() {
    }
    increaseValue() {
        if (this.max !== undefined && this._value >= this.max) {
            return;
        }
        this._value += 1;
        this.onChange(this._value);
    }
    decreaseValue() {
        if (this.min !== undefined && this._value <= this.min) {
            return;
        }
        this._value -= 1;
        this.onChange(this._value);
    }
    get value() {
        return this._value;
    }
    set value(val) {
        this._value = val;
        this.onChange(val);
    }
};
__decorate([
    Input()
], AngularInputNumberComponent.prototype, "min", void 0);
__decorate([
    Input()
], AngularInputNumberComponent.prototype, "max", void 0);
AngularInputNumberComponent = AngularInputNumberComponent_1 = __decorate([
    Component({
        selector: 'lib-angular-input-number',
        template: "<div class=\"\">\r\n  <input [disabled]=\"disabled\" [value]=\"_value\" placeholder=\"*\" (change)=\"onChange($event)\"\r\n         (keyup)=\"onKyUp($event)\" type=\"number\" pattern=\"(\\d*)\" min=\"{{min}}\" max=\"{{max}}\" />\r\n</div>\r\n\r\n<div class=\"input-group-btn\">\r\n  <button class=\"btn button-ancestor down\" type=\"button\" (click)=\"decreaseValue()\"></button>\r\n  <button class=\"btn button-ancestor up\" type=\"button\" (click)=\"increaseValue()\"></button>\r\n</div>\r\n",
        providers: [{
                provide: NG_VALUE_ACCESSOR,
                useExisting: forwardRef(() => AngularInputNumberComponent_1),
                multi: true,
            }],
        styles: ["input[type=number]::-webkit-inner-spin-button,input[type=number]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}:focus{outline:0!important}input[type=number]{-moz-appearance:textfield}input{text-align:center;font-size:4rem;border:none;-webkit-appearance:none;width:102px;margin:0;background-color:transparent}input::-webkit-input-placeholder{color:#fff}input::-moz-placeholder{color:#fff}input:-ms-input-placeholder{color:#fff}input::-ms-input-placeholder{color:#fff}input::placeholder{color:#fff}.button-ancestor{background-repeat:no-repeat;height:26px;width:51px;background-color:transparent;border:0 solid transparent;-webkit-transform:scale(1);transform:scale(1)}.button-ancestor:hover{-webkit-transform:scale(1.1);transform:scale(1.1)}.button-ancestor.down{float:left;background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMy4wLjMsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4wIiBpZD0iTGF5ZXJfMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiDQoJIHdpZHRoPSI1MXB4IiBoZWlnaHQ9IjI2cHgiIHZpZXdCb3g9IjAgMCA1MSAyNiIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNTEgMjY7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+DQoJLnN0MHtmaWxsLXJ1bGU6ZXZlbm9kZDtjbGlwLXJ1bGU6ZXZlbm9kZDtmaWxsOiMxODExMkQ7fQ0KCS5zdDF7ZmlsbC1ydWxlOmV2ZW5vZGQ7Y2xpcC1ydWxlOmV2ZW5vZGQ7ZmlsbDojRkZGRkZGO30NCjwvc3R5bGU+DQo8cGF0aCBjbGFzcz0ic3QwIiBkPSJNNDIuNiwyNkgzLjNjLTEuNywwLTIuOC0xLjQtMi40LTMuMUw1LjIsMy4yQzUuNSwxLjUsNy4yLDAuMSw5LDAuMWgzOS40YzEuNywwLDIuOCwxLjQsMi40LDMuMWwtNC4zLDE5LjcNCglDNDYuMSwyNC42LDQ0LjQsMjYsNDIuNiwyNnoiLz4NCjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0zMi42LDExLjJsLTUuNyw1LjVjLTAuNSwwLjUtMS40LDAuNS0xLjksMGwtNS43LTUuNWMtMC41LTAuNS0wLjUtMS4zLDAtMS44YzAuNS0wLjUsMS40LTAuNSwxLjksMGw0LjcsNC41DQoJbDQuNy00LjVjMC41LTAuNSwxLjQtMC41LDEuOSwwQzMzLjEsOS45LDMzLjEsMTAuNywzMi42LDExLjJ6Ii8+DQo8L3N2Zz4NCg==);margin-top:6px}.button-ancestor.down:focus{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMy4wLjMsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4wIiBpZD0iTGF5ZXJfMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiDQoJIHdpZHRoPSI1MXB4IiBoZWlnaHQ9IjI2cHgiIHZpZXdCb3g9IjAgMCA1MSAyNiIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNTEgMjY7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+DQoJLnN0MHtmaWxsLXJ1bGU6ZXZlbm9kZDtjbGlwLXJ1bGU6ZXZlbm9kZDtmaWxsOiMxODExMkQ7fQ0KCS5zdDF7ZmlsbC1ydWxlOmV2ZW5vZGQ7Y2xpcC1ydWxlOmV2ZW5vZGQ7ZmlsbDojRkZGRkZGO30NCjwvc3R5bGU+DQo8cGF0aCBjbGFzcz0ic3QwIiBkPSJNNDIuNiwyNkgzLjNjLTEuNywwLTIuOC0xLjQtMi40LTMuMUw1LjIsMy4yQzUuNSwxLjUsNy4yLDAuMSw5LDAuMWgzOS40YzEuNywwLDIuOCwxLjQsMi40LDMuMWwtNC4zLDE5LjcNCglDNDYuMSwyNC42LDQ0LjQsMjYsNDIuNiwyNnoiLz4NCjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0zMi42LDExLjJsLTUuNyw1LjVjLTAuNSwwLjUtMS40LDAuNS0xLjksMGwtNS43LTUuNWMtMC41LTAuNS0wLjUtMS4zLDAtMS44YzAuNS0wLjUsMS40LTAuNSwxLjksMGw0LjcsNC41DQoJbDQuNy00LjVjMC41LTAuNSwxLjQtMC41LDEuOSwwQzMzLjEsOS45LDMzLjEsMTAuNywzMi42LDExLjJ6Ii8+DQo8L3N2Zz4NCg==);margin-top:6px;outline:0!important;border:none}.button-ancestor.up{float:left;background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMy4wLjMsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4wIiBpZD0iTGF5ZXJfMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiDQoJIHdpZHRoPSI1MXB4IiBoZWlnaHQ9IjI2cHgiIHZpZXdCb3g9IjAgMCA1MSAyNiIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNTEgMjY7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+DQoJLnN0MHtmaWxsLXJ1bGU6ZXZlbm9kZDtjbGlwLXJ1bGU6ZXZlbm9kZDtmaWxsOiM0QzYxODk7fQ0KCS5zdDF7ZmlsbC1ydWxlOmV2ZW5vZGQ7Y2xpcC1ydWxlOmV2ZW5vZGQ7ZmlsbDojRkZGRkZGO30NCjwvc3R5bGU+DQo8cGF0aCBjbGFzcz0ic3QwIiBkPSJNOC40LDBoMzkuNGMxLjcsMCwyLjgsMS40LDIuNCwzLjFsLTQuMywxOS43Yy0wLjQsMS43LTIuMSwzLjEtMy44LDMuMUgyLjZjLTEuNywwLTIuOC0xLjQtMi40LTMuMUw0LjYsMy4xDQoJQzQuOSwxLjQsNi42LDAsOC40LDB6Ii8+DQo8cGF0aCBjbGFzcz0ic3QxIiBkPSJNMTguNCwxNC44bDUuNy01LjVjMC41LTAuNSwxLjQtMC41LDEuOSwwbDUuNyw1LjVjMC41LDAuNSwwLjUsMS4zLDAsMS44Yy0wLjUsMC41LTEuNCwwLjUtMS45LDBMMjUsMTIuMQ0KCWwtNC43LDQuNWMtMC41LDAuNS0xLjQsMC41LTEuOSwwQzE3LjksMTYuMSwxNy45LDE1LjMsMTguNCwxNC44eiIvPg0KPC9zdmc+DQo=);outline:0!important}.button-ancestor.up:focus{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMy4wLjMsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4wIiBpZD0iTGF5ZXJfMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiDQoJIHdpZHRoPSI1MXB4IiBoZWlnaHQ9IjI2cHgiIHZpZXdCb3g9IjAgMCA1MSAyNiIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNTEgMjY7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+DQoJLnN0MHtmaWxsLXJ1bGU6ZXZlbm9kZDtjbGlwLXJ1bGU6ZXZlbm9kZDtmaWxsOiM0QzYxODk7fQ0KCS5zdDF7ZmlsbC1ydWxlOmV2ZW5vZGQ7Y2xpcC1ydWxlOmV2ZW5vZGQ7ZmlsbDojRkZGRkZGO30NCjwvc3R5bGU+DQo8cGF0aCBjbGFzcz0ic3QwIiBkPSJNOC40LDBoMzkuNGMxLjcsMCwyLjgsMS40LDIuNCwzLjFsLTQuMywxOS43Yy0wLjQsMS43LTIuMSwzLjEtMy44LDMuMUgyLjZjLTEuNywwLTIuOC0xLjQtMi40LTMuMUw0LjYsMy4xDQoJQzQuOSwxLjQsNi42LDAsOC40LDB6Ii8+DQo8cGF0aCBjbGFzcz0ic3QxIiBkPSJNMTguNCwxNC44bDUuNy01LjVjMC41LTAuNSwxLjQtMC41LDEuOSwwbDUuNyw1LjVjMC41LDAuNSwwLjUsMS4zLDAsMS44Yy0wLjUsMC41LTEuNCwwLjUtMS45LDBMMjUsMTIuMQ0KCWwtNC43LDQuNWMtMC41LDAuNS0xLjQsMC41LTEuOSwwQzE3LjksMTYuMSwxNy45LDE1LjMsMTguNCwxNC44eiIvPg0KPC9zdmc+DQo=);outline:0!important}"]
    })
], AngularInputNumberComponent);
export { AngularInputNumberComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYW5ndWxhci1pbnB1dC1udW1iZXIuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vYW5ndWxhci1pbnB1dC1udW1iZXIvIiwic291cmNlcyI6WyJsaWIvYW5ndWxhci1pbnB1dC1udW1iZXIuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsT0FBTyxFQUFFLFNBQVMsRUFBVSxLQUFLLEVBQUUsVUFBVSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQ3JFLE9BQU8sRUFBd0IsaUJBQWlCLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQVl6RSxJQUFhLDJCQUEyQixtQ0FBeEMsTUFBYSwyQkFBMkI7SUFBeEM7UUFPRSxXQUFNLEdBQVcsQ0FBQyxDQUFDO1FBRVgsb0JBQWUsR0FBRyxDQUFDLENBQU0sRUFBRSxFQUFFLEdBQUcsQ0FBQyxDQUFDO0lBbUY1QyxDQUFDO0lBakZDLFFBQVEsQ0FBQyxLQUFLO1FBRVosSUFBSSxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDcEMsQ0FBQztJQUVELFNBQVMsQ0FBQyxLQUFLO1FBRWIsTUFBTSxPQUFPLEdBQUcsSUFBSSxNQUFNLENBQUMsV0FBVyxDQUFDLENBQUE7UUFFdkMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxJQUFJLEtBQUssQ0FBQyxHQUFHLEtBQUssV0FBVyxJQUFJLEtBQUssQ0FBQyxHQUFHLEtBQUssUUFBUSxFQUNuRjtZQUNFLEtBQUssQ0FBQyxjQUFjLEVBQUUsQ0FBQztTQUN4QjtJQUNILENBQUM7SUFFRCxNQUFNLENBQUMsS0FBSztRQUVWLElBQUksQ0FBQyxNQUFNLEdBQUcsS0FBSyxDQUFDLGFBQWEsQ0FBQyxhQUFhLENBQUM7UUFDaEQsSUFBSSxDQUFDLGVBQWUsQ0FBQyxLQUFLLENBQUMsYUFBYSxDQUFDLGFBQWEsQ0FBQyxDQUFDO0lBQzFELENBQUM7SUFFRCxnQkFBZ0IsQ0FBQyxFQUFPO1FBRXRCLElBQUksQ0FBQyxlQUFlLEdBQUcsRUFBRSxDQUFDO0lBQzVCLENBQUM7SUFFRCxpQkFBaUIsQ0FBQyxFQUFPO0lBR3pCLENBQUM7SUFFRCxVQUFVLENBQUMsR0FBUTtRQUVqQixJQUFJLENBQUMsTUFBTSxHQUFHLEdBQUcsQ0FBQztJQUNwQixDQUFDO0lBRUQsZ0JBQWdCLENBQUMsR0FBWTtRQUUzQixJQUFJLElBQUksQ0FBQyxRQUFRLElBQUksSUFBSSxFQUN6QjtZQUNFLElBQUksQ0FBQyxRQUFRLEdBQUcsS0FBSyxDQUFDO1NBQ3ZCO0lBQ0gsQ0FBQztJQUVELFFBQVE7SUFHUixDQUFDO0lBRUQsYUFBYTtRQUVYLElBQUksSUFBSSxDQUFDLEdBQUcsS0FBSyxTQUFTLElBQUksSUFBSSxDQUFDLE1BQU0sSUFBSSxJQUFJLENBQUMsR0FBRyxFQUNyRDtZQUNFLE9BQU87U0FDUjtRQUVELElBQUksQ0FBQyxNQUFNLElBQUksQ0FBQyxDQUFDO1FBQ2pCLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQzdCLENBQUM7SUFFRCxhQUFhO1FBRVgsSUFBSSxJQUFJLENBQUMsR0FBRyxLQUFLLFNBQVMsSUFBSSxJQUFJLENBQUMsTUFBTSxJQUFJLElBQUksQ0FBQyxHQUFHLEVBQ3JEO1lBQ0UsT0FBTztTQUNSO1FBRUQsSUFBSSxDQUFDLE1BQU0sSUFBSSxDQUFDLENBQUM7UUFDakIsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDN0IsQ0FBQztJQUVELElBQUksS0FBSztRQUVQLE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQztJQUNyQixDQUFDO0lBRUQsSUFBSSxLQUFLLENBQUMsR0FBRztRQUVYLElBQUksQ0FBQyxNQUFNLEdBQUcsR0FBRyxDQUFDO1FBQ2xCLElBQUksQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDckIsQ0FBQztDQUNGLENBQUE7QUExRlU7SUFBUixLQUFLLEVBQUU7d0RBQWE7QUFDWjtJQUFSLEtBQUssRUFBRTt3REFBYTtBQUhWLDJCQUEyQjtJQVZ2QyxTQUFTLENBQUM7UUFDVCxRQUFRLEVBQUUsMEJBQTBCO1FBQ3BDLHlmQUEwQztRQUUxQyxTQUFTLEVBQUUsQ0FBQztnQkFDVixPQUFPLEVBQUUsaUJBQWlCO2dCQUMxQixXQUFXLEVBQUUsVUFBVSxDQUFDLEdBQUcsRUFBRSxDQUFDLDZCQUEyQixDQUFDO2dCQUMxRCxLQUFLLEVBQUUsSUFBSTthQUNaLENBQUM7O0tBQ0gsQ0FBQztHQUNXLDJCQUEyQixDQTRGdkM7U0E1RlksMkJBQTJCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBPbkluaXQsIElucHV0LCBmb3J3YXJkUmVmIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBDb250cm9sVmFsdWVBY2Nlc3NvciwgTkdfVkFMVUVfQUNDRVNTT1IgfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ2xpYi1hbmd1bGFyLWlucHV0LW51bWJlcicsXG4gIHRlbXBsYXRlVXJsOiAnLi9hbmd1bGFyLWlucHV0LW51bWJlci5odG1sJyxcbiAgc3R5bGVVcmxzOiBbJy4vYW5ndWxhci1pbnB1dC1udW1iZXIuc2NzcyddLFxuICBwcm92aWRlcnM6IFt7XG4gICAgcHJvdmlkZTogTkdfVkFMVUVfQUNDRVNTT1IsXG4gICAgdXNlRXhpc3Rpbmc6IGZvcndhcmRSZWYoKCkgPT4gQW5ndWxhcklucHV0TnVtYmVyQ29tcG9uZW50KSxcbiAgICBtdWx0aTogdHJ1ZSxcbiAgfV1cbn0pXG5leHBvcnQgY2xhc3MgQW5ndWxhcklucHV0TnVtYmVyQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBDb250cm9sVmFsdWVBY2Nlc3Nvclxue1xuICBASW5wdXQoKSBtaW46IG51bWJlcjtcbiAgQElucHV0KCkgbWF4OiBudW1iZXI7XG4gIHN0ZXA6IG51bWJlcjtcbiAgcHJlY2lzaW9uOiBudW1iZXI7XG4gIGRpc2FibGVkOiBib29sZWFuO1xuICBfdmFsdWU6IG51bWJlciA9IDA7XG5cbiAgcHJpdmF0ZSBwcm9wYWdhdGVDaGFuZ2UgPSAoXzogYW55KSA9PiB7IH07XG5cbiAgb25DaGFuZ2UoZXZlbnQpXG4gIHtcbiAgICB0aGlzLnByb3BhZ2F0ZUNoYW5nZSh0aGlzLl92YWx1ZSk7XG4gIH1cblxuICBvbktleURvd24oZXZlbnQpXG4gIHtcbiAgICBjb25zdCBwYXR0ZXJuID0gbmV3IFJlZ0V4cCgnWzAtOV18XFxcXConKVxuXG4gICAgaWYgKCFwYXR0ZXJuLnRlc3QoZXZlbnQua2V5KSAmJiBldmVudC5rZXkgIT09IFwiQmFja3NwYWNlXCIgJiYgZXZlbnQua2V5ICE9PSBcIkRlbGV0ZVwiKVxuICAgIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxuICB9XG5cbiAgb25LeVVwKGV2ZW50KVxuICB7XG4gICAgdGhpcy5fdmFsdWUgPSBldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlQXNOdW1iZXI7XG4gICAgdGhpcy5wcm9wYWdhdGVDaGFuZ2UoZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZUFzTnVtYmVyKTtcbiAgfVxuXG4gIHJlZ2lzdGVyT25DaGFuZ2UoZm46IGFueSlcbiAge1xuICAgIHRoaXMucHJvcGFnYXRlQ2hhbmdlID0gZm47XG4gIH1cblxuICByZWdpc3Rlck9uVG91Y2hlZChmbjogYW55KVxuICB7XG5cbiAgfVxuXG4gIHdyaXRlVmFsdWUodmFsOiBhbnkpXG4gIHtcbiAgICB0aGlzLl92YWx1ZSA9IHZhbDtcbiAgfVxuXG4gIHNldERpc2FibGVkU3RhdGUodmFsOiBib29sZWFuKVxuICB7XG4gICAgaWYgKHRoaXMuZGlzYWJsZWQgPT0gbnVsbClcbiAgICB7XG4gICAgICB0aGlzLmRpc2FibGVkID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgbmdPbkluaXQoKVxuICB7XG5cbiAgfVxuXG4gIGluY3JlYXNlVmFsdWUoKTogdm9pZFxuICB7XG4gICAgaWYgKHRoaXMubWF4ICE9PSB1bmRlZmluZWQgJiYgdGhpcy5fdmFsdWUgPj0gdGhpcy5tYXgpXG4gICAge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuX3ZhbHVlICs9IDE7XG4gICAgdGhpcy5vbkNoYW5nZSh0aGlzLl92YWx1ZSk7XG4gIH1cblxuICBkZWNyZWFzZVZhbHVlKCk6IHZvaWRcbiAge1xuICAgIGlmICh0aGlzLm1pbiAhPT0gdW5kZWZpbmVkICYmIHRoaXMuX3ZhbHVlIDw9IHRoaXMubWluKVxuICAgIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLl92YWx1ZSAtPSAxO1xuICAgIHRoaXMub25DaGFuZ2UodGhpcy5fdmFsdWUpO1xuICB9XG5cbiAgZ2V0IHZhbHVlKClcbiAge1xuICAgIHJldHVybiB0aGlzLl92YWx1ZTtcbiAgfVxuXG4gIHNldCB2YWx1ZSh2YWwpXG4gIHtcbiAgICB0aGlzLl92YWx1ZSA9IHZhbDtcbiAgICB0aGlzLm9uQ2hhbmdlKHZhbCk7XG4gIH1cbn1cbiJdfQ==