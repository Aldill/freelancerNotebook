import { __decorate } from "tslib";
import { Component, Input, forwardRef } from '@angular/core';
import { NG_VALUE_ACCESSOR } from '@angular/forms';
var AngularInputNumberComponent = /** @class */ (function () {
    function AngularInputNumberComponent() {
        this._value = 0;
        this.propagateChange = function (_) { };
    }
    AngularInputNumberComponent_1 = AngularInputNumberComponent;
    AngularInputNumberComponent.prototype.onChange = function (event) {
        this.propagateChange(this._value);
    };
    AngularInputNumberComponent.prototype.onKeyDown = function (event) {
        var pattern = new RegExp('[0-9]|\\*');
        if (!pattern.test(event.key) && event.key !== "Backspace" && event.key !== "Delete") {
            event.preventDefault();
        }
    };
    AngularInputNumberComponent.prototype.onKyUp = function (event) {
        this._value = event.currentTarget.valueAsNumber;
        this.propagateChange(event.currentTarget.valueAsNumber);
    };
    AngularInputNumberComponent.prototype.registerOnChange = function (fn) {
        this.propagateChange = fn;
    };
    AngularInputNumberComponent.prototype.registerOnTouched = function (fn) {
    };
    AngularInputNumberComponent.prototype.writeValue = function (val) {
        this._value = val;
    };
    AngularInputNumberComponent.prototype.setDisabledState = function (val) {
        if (this.disabled == null) {
            this.disabled = false;
        }
    };
    AngularInputNumberComponent.prototype.ngOnInit = function () {
    };
    AngularInputNumberComponent.prototype.increaseValue = function () {
        if (this.max !== undefined && this._value >= this.max) {
            return;
        }
        this._value += 1;
        this.onChange(this._value);
    };
    AngularInputNumberComponent.prototype.decreaseValue = function () {
        if (this.min !== undefined && this._value <= this.min) {
            return;
        }
        this._value -= 1;
        this.onChange(this._value);
    };
    Object.defineProperty(AngularInputNumberComponent.prototype, "value", {
        get: function () {
            return this._value;
        },
        set: function (val) {
            this._value = val;
            this.onChange(val);
        },
        enumerable: true,
        configurable: true
    });
    var AngularInputNumberComponent_1;
    __decorate([
        Input()
    ], AngularInputNumberComponent.prototype, "min", void 0);
    __decorate([
        Input()
    ], AngularInputNumberComponent.prototype, "max", void 0);
    AngularInputNumberComponent = AngularInputNumberComponent_1 = __decorate([
        Component({
            selector: 'lib-angular-input-number',
            template: "<div class=\"\">\r\n  <input [disabled]=\"disabled\" [value]=\"_value\" placeholder=\"*\" (change)=\"onChange($event)\"\r\n         (keyup)=\"onKyUp($event)\" type=\"number\" pattern=\"(\\d*)\" min=\"{{min}}\" max=\"{{max}}\" />\r\n</div>\r\n\r\n<div class=\"input-group-btn\">\r\n  <button class=\"btn button-ancestor down\" type=\"button\" (click)=\"decreaseValue()\"></button>\r\n  <button class=\"btn button-ancestor up\" type=\"button\" (click)=\"increaseValue()\"></button>\r\n</div>\r\n",
            providers: [{
                    provide: NG_VALUE_ACCESSOR,
                    useExisting: forwardRef(function () { return AngularInputNumberComponent_1; }),
                    multi: true,
                }],
            styles: ["input[type=number]::-webkit-inner-spin-button,input[type=number]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}:focus{outline:0!important}input[type=number]{-moz-appearance:textfield}input{text-align:center;font-size:4rem;border:none;-webkit-appearance:none;width:102px;margin:0;background-color:transparent}input::-webkit-input-placeholder{color:#fff}input::-moz-placeholder{color:#fff}input:-ms-input-placeholder{color:#fff}input::-ms-input-placeholder{color:#fff}input::placeholder{color:#fff}.button-ancestor{background-repeat:no-repeat;height:26px;width:51px;background-color:transparent;border:0 solid transparent;-webkit-transform:scale(1);transform:scale(1)}.button-ancestor:hover{-webkit-transform:scale(1.1);transform:scale(1.1)}.button-ancestor.down{float:left;background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMy4wLjMsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4wIiBpZD0iTGF5ZXJfMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiDQoJIHdpZHRoPSI1MXB4IiBoZWlnaHQ9IjI2cHgiIHZpZXdCb3g9IjAgMCA1MSAyNiIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNTEgMjY7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+DQoJLnN0MHtmaWxsLXJ1bGU6ZXZlbm9kZDtjbGlwLXJ1bGU6ZXZlbm9kZDtmaWxsOiMxODExMkQ7fQ0KCS5zdDF7ZmlsbC1ydWxlOmV2ZW5vZGQ7Y2xpcC1ydWxlOmV2ZW5vZGQ7ZmlsbDojRkZGRkZGO30NCjwvc3R5bGU+DQo8cGF0aCBjbGFzcz0ic3QwIiBkPSJNNDIuNiwyNkgzLjNjLTEuNywwLTIuOC0xLjQtMi40LTMuMUw1LjIsMy4yQzUuNSwxLjUsNy4yLDAuMSw5LDAuMWgzOS40YzEuNywwLDIuOCwxLjQsMi40LDMuMWwtNC4zLDE5LjcNCglDNDYuMSwyNC42LDQ0LjQsMjYsNDIuNiwyNnoiLz4NCjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0zMi42LDExLjJsLTUuNyw1LjVjLTAuNSwwLjUtMS40LDAuNS0xLjksMGwtNS43LTUuNWMtMC41LTAuNS0wLjUtMS4zLDAtMS44YzAuNS0wLjUsMS40LTAuNSwxLjksMGw0LjcsNC41DQoJbDQuNy00LjVjMC41LTAuNSwxLjQtMC41LDEuOSwwQzMzLjEsOS45LDMzLjEsMTAuNywzMi42LDExLjJ6Ii8+DQo8L3N2Zz4NCg==);margin-top:6px}.button-ancestor.down:focus{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMy4wLjMsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4wIiBpZD0iTGF5ZXJfMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiDQoJIHdpZHRoPSI1MXB4IiBoZWlnaHQ9IjI2cHgiIHZpZXdCb3g9IjAgMCA1MSAyNiIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNTEgMjY7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+DQoJLnN0MHtmaWxsLXJ1bGU6ZXZlbm9kZDtjbGlwLXJ1bGU6ZXZlbm9kZDtmaWxsOiMxODExMkQ7fQ0KCS5zdDF7ZmlsbC1ydWxlOmV2ZW5vZGQ7Y2xpcC1ydWxlOmV2ZW5vZGQ7ZmlsbDojRkZGRkZGO30NCjwvc3R5bGU+DQo8cGF0aCBjbGFzcz0ic3QwIiBkPSJNNDIuNiwyNkgzLjNjLTEuNywwLTIuOC0xLjQtMi40LTMuMUw1LjIsMy4yQzUuNSwxLjUsNy4yLDAuMSw5LDAuMWgzOS40YzEuNywwLDIuOCwxLjQsMi40LDMuMWwtNC4zLDE5LjcNCglDNDYuMSwyNC42LDQ0LjQsMjYsNDIuNiwyNnoiLz4NCjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0zMi42LDExLjJsLTUuNyw1LjVjLTAuNSwwLjUtMS40LDAuNS0xLjksMGwtNS43LTUuNWMtMC41LTAuNS0wLjUtMS4zLDAtMS44YzAuNS0wLjUsMS40LTAuNSwxLjksMGw0LjcsNC41DQoJbDQuNy00LjVjMC41LTAuNSwxLjQtMC41LDEuOSwwQzMzLjEsOS45LDMzLjEsMTAuNywzMi42LDExLjJ6Ii8+DQo8L3N2Zz4NCg==);margin-top:6px;outline:0!important;border:none}.button-ancestor.up{float:left;background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMy4wLjMsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4wIiBpZD0iTGF5ZXJfMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiDQoJIHdpZHRoPSI1MXB4IiBoZWlnaHQ9IjI2cHgiIHZpZXdCb3g9IjAgMCA1MSAyNiIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNTEgMjY7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+DQoJLnN0MHtmaWxsLXJ1bGU6ZXZlbm9kZDtjbGlwLXJ1bGU6ZXZlbm9kZDtmaWxsOiM0QzYxODk7fQ0KCS5zdDF7ZmlsbC1ydWxlOmV2ZW5vZGQ7Y2xpcC1ydWxlOmV2ZW5vZGQ7ZmlsbDojRkZGRkZGO30NCjwvc3R5bGU+DQo8cGF0aCBjbGFzcz0ic3QwIiBkPSJNOC40LDBoMzkuNGMxLjcsMCwyLjgsMS40LDIuNCwzLjFsLTQuMywxOS43Yy0wLjQsMS43LTIuMSwzLjEtMy44LDMuMUgyLjZjLTEuNywwLTIuOC0xLjQtMi40LTMuMUw0LjYsMy4xDQoJQzQuOSwxLjQsNi42LDAsOC40LDB6Ii8+DQo8cGF0aCBjbGFzcz0ic3QxIiBkPSJNMTguNCwxNC44bDUuNy01LjVjMC41LTAuNSwxLjQtMC41LDEuOSwwbDUuNyw1LjVjMC41LDAuNSwwLjUsMS4zLDAsMS44Yy0wLjUsMC41LTEuNCwwLjUtMS45LDBMMjUsMTIuMQ0KCWwtNC43LDQuNWMtMC41LDAuNS0xLjQsMC41LTEuOSwwQzE3LjksMTYuMSwxNy45LDE1LjMsMTguNCwxNC44eiIvPg0KPC9zdmc+DQo=);outline:0!important}.button-ancestor.up:focus{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMy4wLjMsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4wIiBpZD0iTGF5ZXJfMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiDQoJIHdpZHRoPSI1MXB4IiBoZWlnaHQ9IjI2cHgiIHZpZXdCb3g9IjAgMCA1MSAyNiIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNTEgMjY7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+DQoJLnN0MHtmaWxsLXJ1bGU6ZXZlbm9kZDtjbGlwLXJ1bGU6ZXZlbm9kZDtmaWxsOiM0QzYxODk7fQ0KCS5zdDF7ZmlsbC1ydWxlOmV2ZW5vZGQ7Y2xpcC1ydWxlOmV2ZW5vZGQ7ZmlsbDojRkZGRkZGO30NCjwvc3R5bGU+DQo8cGF0aCBjbGFzcz0ic3QwIiBkPSJNOC40LDBoMzkuNGMxLjcsMCwyLjgsMS40LDIuNCwzLjFsLTQuMywxOS43Yy0wLjQsMS43LTIuMSwzLjEtMy44LDMuMUgyLjZjLTEuNywwLTIuOC0xLjQtMi40LTMuMUw0LjYsMy4xDQoJQzQuOSwxLjQsNi42LDAsOC40LDB6Ii8+DQo8cGF0aCBjbGFzcz0ic3QxIiBkPSJNMTguNCwxNC44bDUuNy01LjVjMC41LTAuNSwxLjQtMC41LDEuOSwwbDUuNyw1LjVjMC41LDAuNSwwLjUsMS4zLDAsMS44Yy0wLjUsMC41LTEuNCwwLjUtMS45LDBMMjUsMTIuMQ0KCWwtNC43LDQuNWMtMC41LDAuNS0xLjQsMC41LTEuOSwwQzE3LjksMTYuMSwxNy45LDE1LjMsMTguNCwxNC44eiIvPg0KPC9zdmc+DQo=);outline:0!important}"]
        })
    ], AngularInputNumberComponent);
    return AngularInputNumberComponent;
}());
export { AngularInputNumberComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYW5ndWxhci1pbnB1dC1udW1iZXIuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vYW5ndWxhci1pbnB1dC1udW1iZXIvIiwic291cmNlcyI6WyJsaWIvYW5ndWxhci1pbnB1dC1udW1iZXIuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFVLEtBQUssRUFBRSxVQUFVLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDckUsT0FBTyxFQUF3QixpQkFBaUIsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBWXpFO0lBQUE7UUFPRSxXQUFNLEdBQVcsQ0FBQyxDQUFDO1FBRVgsb0JBQWUsR0FBRyxVQUFDLENBQU0sSUFBTyxDQUFDLENBQUM7SUFtRjVDLENBQUM7b0NBNUZZLDJCQUEyQjtJQVd0Qyw4Q0FBUSxHQUFSLFVBQVMsS0FBSztRQUVaLElBQUksQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQ3BDLENBQUM7SUFFRCwrQ0FBUyxHQUFULFVBQVUsS0FBSztRQUViLElBQU0sT0FBTyxHQUFHLElBQUksTUFBTSxDQUFDLFdBQVcsQ0FBQyxDQUFBO1FBRXZDLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsSUFBSSxLQUFLLENBQUMsR0FBRyxLQUFLLFdBQVcsSUFBSSxLQUFLLENBQUMsR0FBRyxLQUFLLFFBQVEsRUFDbkY7WUFDRSxLQUFLLENBQUMsY0FBYyxFQUFFLENBQUM7U0FDeEI7SUFDSCxDQUFDO0lBRUQsNENBQU0sR0FBTixVQUFPLEtBQUs7UUFFVixJQUFJLENBQUMsTUFBTSxHQUFHLEtBQUssQ0FBQyxhQUFhLENBQUMsYUFBYSxDQUFDO1FBQ2hELElBQUksQ0FBQyxlQUFlLENBQUMsS0FBSyxDQUFDLGFBQWEsQ0FBQyxhQUFhLENBQUMsQ0FBQztJQUMxRCxDQUFDO0lBRUQsc0RBQWdCLEdBQWhCLFVBQWlCLEVBQU87UUFFdEIsSUFBSSxDQUFDLGVBQWUsR0FBRyxFQUFFLENBQUM7SUFDNUIsQ0FBQztJQUVELHVEQUFpQixHQUFqQixVQUFrQixFQUFPO0lBR3pCLENBQUM7SUFFRCxnREFBVSxHQUFWLFVBQVcsR0FBUTtRQUVqQixJQUFJLENBQUMsTUFBTSxHQUFHLEdBQUcsQ0FBQztJQUNwQixDQUFDO0lBRUQsc0RBQWdCLEdBQWhCLFVBQWlCLEdBQVk7UUFFM0IsSUFBSSxJQUFJLENBQUMsUUFBUSxJQUFJLElBQUksRUFDekI7WUFDRSxJQUFJLENBQUMsUUFBUSxHQUFHLEtBQUssQ0FBQztTQUN2QjtJQUNILENBQUM7SUFFRCw4Q0FBUSxHQUFSO0lBR0EsQ0FBQztJQUVELG1EQUFhLEdBQWI7UUFFRSxJQUFJLElBQUksQ0FBQyxHQUFHLEtBQUssU0FBUyxJQUFJLElBQUksQ0FBQyxNQUFNLElBQUksSUFBSSxDQUFDLEdBQUcsRUFDckQ7WUFDRSxPQUFPO1NBQ1I7UUFFRCxJQUFJLENBQUMsTUFBTSxJQUFJLENBQUMsQ0FBQztRQUNqQixJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUM3QixDQUFDO0lBRUQsbURBQWEsR0FBYjtRQUVFLElBQUksSUFBSSxDQUFDLEdBQUcsS0FBSyxTQUFTLElBQUksSUFBSSxDQUFDLE1BQU0sSUFBSSxJQUFJLENBQUMsR0FBRyxFQUNyRDtZQUNFLE9BQU87U0FDUjtRQUVELElBQUksQ0FBQyxNQUFNLElBQUksQ0FBQyxDQUFDO1FBQ2pCLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQzdCLENBQUM7SUFFRCxzQkFBSSw4Q0FBSzthQUFUO1lBRUUsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDO1FBQ3JCLENBQUM7YUFFRCxVQUFVLEdBQUc7WUFFWCxJQUFJLENBQUMsTUFBTSxHQUFHLEdBQUcsQ0FBQztZQUNsQixJQUFJLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ3JCLENBQUM7OztPQU5BOztJQW5GUTtRQUFSLEtBQUssRUFBRTs0REFBYTtJQUNaO1FBQVIsS0FBSyxFQUFFOzREQUFhO0lBSFYsMkJBQTJCO1FBVnZDLFNBQVMsQ0FBQztZQUNULFFBQVEsRUFBRSwwQkFBMEI7WUFDcEMseWZBQTBDO1lBRTFDLFNBQVMsRUFBRSxDQUFDO29CQUNWLE9BQU8sRUFBRSxpQkFBaUI7b0JBQzFCLFdBQVcsRUFBRSxVQUFVLENBQUMsY0FBTSxPQUFBLDZCQUEyQixFQUEzQixDQUEyQixDQUFDO29CQUMxRCxLQUFLLEVBQUUsSUFBSTtpQkFDWixDQUFDOztTQUNILENBQUM7T0FDVywyQkFBMkIsQ0E0RnZDO0lBQUQsa0NBQUM7Q0FBQSxBQTVGRCxJQTRGQztTQTVGWSwyQkFBMkIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIE9uSW5pdCwgSW5wdXQsIGZvcndhcmRSZWYgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IENvbnRyb2xWYWx1ZUFjY2Vzc29yLCBOR19WQUxVRV9BQ0NFU1NPUiB9IGZyb20gJ0Bhbmd1bGFyL2Zvcm1zJztcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnbGliLWFuZ3VsYXItaW5wdXQtbnVtYmVyJyxcbiAgdGVtcGxhdGVVcmw6ICcuL2FuZ3VsYXItaW5wdXQtbnVtYmVyLmh0bWwnLFxuICBzdHlsZVVybHM6IFsnLi9hbmd1bGFyLWlucHV0LW51bWJlci5zY3NzJ10sXG4gIHByb3ZpZGVyczogW3tcbiAgICBwcm92aWRlOiBOR19WQUxVRV9BQ0NFU1NPUixcbiAgICB1c2VFeGlzdGluZzogZm9yd2FyZFJlZigoKSA9PiBBbmd1bGFySW5wdXROdW1iZXJDb21wb25lbnQpLFxuICAgIG11bHRpOiB0cnVlLFxuICB9XVxufSlcbmV4cG9ydCBjbGFzcyBBbmd1bGFySW5wdXROdW1iZXJDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIENvbnRyb2xWYWx1ZUFjY2Vzc29yXG57XG4gIEBJbnB1dCgpIG1pbjogbnVtYmVyO1xuICBASW5wdXQoKSBtYXg6IG51bWJlcjtcbiAgc3RlcDogbnVtYmVyO1xuICBwcmVjaXNpb246IG51bWJlcjtcbiAgZGlzYWJsZWQ6IGJvb2xlYW47XG4gIF92YWx1ZTogbnVtYmVyID0gMDtcblxuICBwcml2YXRlIHByb3BhZ2F0ZUNoYW5nZSA9IChfOiBhbnkpID0+IHsgfTtcblxuICBvbkNoYW5nZShldmVudClcbiAge1xuICAgIHRoaXMucHJvcGFnYXRlQ2hhbmdlKHRoaXMuX3ZhbHVlKTtcbiAgfVxuXG4gIG9uS2V5RG93bihldmVudClcbiAge1xuICAgIGNvbnN0IHBhdHRlcm4gPSBuZXcgUmVnRXhwKCdbMC05XXxcXFxcKicpXG5cbiAgICBpZiAoIXBhdHRlcm4udGVzdChldmVudC5rZXkpICYmIGV2ZW50LmtleSAhPT0gXCJCYWNrc3BhY2VcIiAmJiBldmVudC5rZXkgIT09IFwiRGVsZXRlXCIpXG4gICAge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG4gIH1cblxuICBvbkt5VXAoZXZlbnQpXG4gIHtcbiAgICB0aGlzLl92YWx1ZSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWVBc051bWJlcjtcbiAgICB0aGlzLnByb3BhZ2F0ZUNoYW5nZShldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlQXNOdW1iZXIpO1xuICB9XG5cbiAgcmVnaXN0ZXJPbkNoYW5nZShmbjogYW55KVxuICB7XG4gICAgdGhpcy5wcm9wYWdhdGVDaGFuZ2UgPSBmbjtcbiAgfVxuXG4gIHJlZ2lzdGVyT25Ub3VjaGVkKGZuOiBhbnkpXG4gIHtcblxuICB9XG5cbiAgd3JpdGVWYWx1ZSh2YWw6IGFueSlcbiAge1xuICAgIHRoaXMuX3ZhbHVlID0gdmFsO1xuICB9XG5cbiAgc2V0RGlzYWJsZWRTdGF0ZSh2YWw6IGJvb2xlYW4pXG4gIHtcbiAgICBpZiAodGhpcy5kaXNhYmxlZCA9PSBudWxsKVxuICAgIHtcbiAgICAgIHRoaXMuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBuZ09uSW5pdCgpXG4gIHtcblxuICB9XG5cbiAgaW5jcmVhc2VWYWx1ZSgpOiB2b2lkXG4gIHtcbiAgICBpZiAodGhpcy5tYXggIT09IHVuZGVmaW5lZCAmJiB0aGlzLl92YWx1ZSA+PSB0aGlzLm1heClcbiAgICB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5fdmFsdWUgKz0gMTtcbiAgICB0aGlzLm9uQ2hhbmdlKHRoaXMuX3ZhbHVlKTtcbiAgfVxuXG4gIGRlY3JlYXNlVmFsdWUoKTogdm9pZFxuICB7XG4gICAgaWYgKHRoaXMubWluICE9PSB1bmRlZmluZWQgJiYgdGhpcy5fdmFsdWUgPD0gdGhpcy5taW4pXG4gICAge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuX3ZhbHVlIC09IDE7XG4gICAgdGhpcy5vbkNoYW5nZSh0aGlzLl92YWx1ZSk7XG4gIH1cblxuICBnZXQgdmFsdWUoKVxuICB7XG4gICAgcmV0dXJuIHRoaXMuX3ZhbHVlO1xuICB9XG5cbiAgc2V0IHZhbHVlKHZhbClcbiAge1xuICAgIHRoaXMuX3ZhbHVlID0gdmFsO1xuICAgIHRoaXMub25DaGFuZ2UodmFsKTtcbiAgfVxufVxuIl19